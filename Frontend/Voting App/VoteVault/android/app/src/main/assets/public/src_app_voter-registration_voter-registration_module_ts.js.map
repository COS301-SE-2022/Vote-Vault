{"version":3,"file":"src_app_voter-registration_voter-registration_module_ts.js","mappings":"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","sources":["./src/app/voter-registration/voter-registration-routing.module.ts","./src/app/voter-registration/voter-registration.module.ts","./src/app/voter-registration/voter-registration.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { VoterRegistrationPage } from './voter-registration.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: VoterRegistrationPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class VoterRegistrationPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { VoterRegistrationPageRoutingModule } from './voter-registration-routing.module';\r\n\r\nimport { VoterRegistrationPage } from './voter-registration.page';\r\nimport { CircleTopComponent } from '../components/circle-top/circle-top.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    VoterRegistrationPageRoutingModule\r\n  ],\r\n  declarations: [VoterRegistrationPage, CircleTopComponent]\r\n})\r\nexport class VoterRegistrationPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { BarcodeScanner,BarcodeScannerOptions } from '@ionic-native/barcode-scanner/ngx';\r\nimport { LoadingController, ToastController } from '@ionic/angular';\r\nimport { doc } from 'firebase/firestore';\r\nimport { DataService, Voter } from '../data.service';\r\nimport { ContractService } from '../services/contract.service';\r\n\r\n@Component({\r\n  selector: 'app-voter-registration',\r\n  templateUrl: './voter-registration.page.html',\r\n  styleUrls: ['./voter-registration.page.scss'],\r\n})\r\nexport class VoterRegistrationPage implements OnInit {\r\n  name: string = '';\r\n  surname: string = '';\r\n  gender: any;\r\n  idNum: string = '';\r\n  voterNames: any[];\r\n  voterSurnames: any[];\r\n  voterIDs: any[];\r\n  scannedData: any;\r\n  encodedData: string = '';\r\n  encodeData: any;\r\n  inputData: any;\r\n  voter: Voter;\r\n\r\n  constructor(private loadingController : LoadingController, private toastController : ToastController, private contractService : ContractService, private router: Router, private barcodeScanner: BarcodeScanner, private dataservice: DataService) { }\r\n\r\n  ngOnInit() {\r\n    this.voterIDs = [];\r\n    this.voterNames = [];\r\n    this.voterSurnames = [];\r\n\r\n    // console.log(this.dataservice.electionName)\r\n  }\r\n\r\n  async registerVoter() {\r\n\r\n    // const first = this.voterIDs.find((obj) => obj === nVoter.id);\r\n    // if (first != null) {\r\n    //   alert('The entered ID is already registered with a voter.');\r\n    //   return;\r\n    // }\r\n    // this.voterNames.push(nVoter.name);\r\n    // this.voterSurnames.push(nVoter.surname);\r\n    // this.voterIDs.push(nVoter.id);\r\n    // alert(this.voter)\r\n    this.presentLoading()\r\n    if (await this.dataservice.checkVoters(this.idNum) == false) {\r\n      alert('Not registered!');\r\n      try {\r\n        await this.dataservice.addvoter(this.voter)\r\n        .then(async () =>  {\r\n          await this.contractService.addVoter(this.dataservice.contractAddress, this.voter)\r\n          .then(()  =>  {\r\n            // alert('Successfully registered!');\r\n            this.presentToast('Successfully registered ' + this.voter.birthName + \", \" + this.voter.IDnum)\r\n            this.loadingController.dismiss()\r\n            this.router.navigate(['admin-dashboard'])\r\n          })\r\n        }).catch((error)  =>  {\r\n          this.presentToast('Error registering')\r\n          this.loadingController.dismiss()\r\n          console.error(error)\r\n        })\r\n      } catch (err) {\r\n        alert(err);\r\n      }\r\n    } else {\r\n      //alert('Already registered voter!');\r\n      alert('Redirecting');\r\n      this.router.navigate(['ballot'])\r\n    }\r\n\r\n    this.name = '';\r\n    this.surname = '';\r\n    this.idNum = '';\r\n    this.gender = '';\r\n\r\n    document.getElementById(\"regnowbutton\").style.display = \"none\";\r\n\r\n  }\r\n\r\n  openCustom() {\r\n    this.router.navigate(['admin-dashboard']);\r\n  }\r\n\r\n  scanBarcode() {\r\n    const options: BarcodeScannerOptions = {\r\n      preferFrontCamera: false,\r\n      showFlipCameraButton: true,\r\n      showTorchButton: true,\r\n      torchOn: false,\r\n      prompt: 'Place a barcode inside the scan area',\r\n      resultDisplayDuration: 500,\r\n      formats: 'PDF_417',\r\n      orientation: 'landscape',\r\n    };\r\n\r\n    this.barcodeScanner.scan(options).then(barcodeData => {\r\n      this.scannedData = barcodeData;\r\n      this.inputData = this.scannedData[\"text\"];\r\n\r\n      var splitted = this.inputData.split(\"|\");\r\n      this.surname = splitted[0];\r\n      this.name = splitted[1];\r\n      this.gender = splitted[2];\r\n      this.idNum = splitted[4]\r\n\r\n      this.voter = this.dataservice.createVoter(this.name, this.surname, this.idNum, this.gender);\r\n\r\n      // alert(this.voter.birthName)\r\n\r\n      document.getElementById(\"regnowbutton\").style.display = \"block\";\r\n    }).catch(err => {\r\n      console.log('Error', err);\r\n    });\r\n  }\r\n\r\n  async presentToast(message) {\r\n    const toast = await this.toastController.create({\r\n      duration: 800,\r\n      message: message,\r\n      color: 'light',\r\n      mode: 'ios'\r\n    });\r\n\r\n    await toast.present();\r\n  }\r\n\r\n  async presentLoading() {\r\n    const loading = await this.loadingController.create({\r\n      cssClass: 'my-custom-class',\r\n      message: 'Please wait...',\r\n      duration: 30000\r\n    });\r\n    await loading.present();\r\n\r\n    const { role, data } = await loading.onDidDismiss();\r\n    console.log('Loading dismissed!');\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///"}
